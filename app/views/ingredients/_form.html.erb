<%= form_with url: new_ingredient_path, method: :get, class: "d-flex" do %>
  <%= text_field_tag :query,
    params[:query],
    class: "form-control",
    placeholder: "Find a product"
  %>
  <%= submit_tag "Search", class: "btn btn-primary" %>
<% end %>

<div data-controller="submit-item">
    <%= simple_form_for([@ingredient], data:{submit_item_target: "form"}) do |f| %>
        <% label_method = proc { |p| 
        "<div data-action = 'click->submit-item#submit'>
            <div>#{p.product_name}</div>
            <div>#{image_tag(p.image_small_url)}</div>
        </div>".html_safe } %>
        <%= f.input :code, as: :radio_buttons, 
        collection: @products, 
        label_method: label_method, 
        value_method: :code, 
        wrapper_html: { } %>
    <% end %>
</div>

